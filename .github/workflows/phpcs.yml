name: PHP Coding Standards Check

on:
  push:
    branches:
      - main

jobs:
  phpcs:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
      with:
      submodules: recursive  # Ensures submodules are initialized and updated

    - name: Run WordPress Coding Standards
      uses: 10up/wpcs-action@v1.2.0
      with:
      path: 'Templify-Builder'
      standard: 'WordPress'
      
    - name: Set up PHP
      uses: shivammathur/setup-php@v2
      with:
          php-version: '7.4'

    - name: Install dependencies
      run: |
          curl -sS https://getcomposer.org/installer | php
          php composer.phar install

    - name: Run PHPCS
      run: ./vendor/bin/phpcs --standard=WordPress admin/ assets/ index.php
